{"version":3,"sources":["main.coffee"],"names":[],"mappings":"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","file":"main.js","sourceRoot":"/source/","sourcesContent":["app = angular.module 'app'\r\n\r\napp.controller 'DashboardController', [\r\n  '$scope',\r\n  ($scope) ->\r\n    $scope.test = 'works'\r\n]\r\n\r\napp.controller 'AppCtrl', [\r\n  '$scope', '$translate', '$localStorage', '$window',\r\n  ($scope, $translate, $localStorage, $window) ->\r\n    isSmartDevice = (window) ->\r\n      # Adapted from http://www.detectmobilebrowsers.com\r\n      ua = window['navigator']['userAgent'] or window['navigator']['vendor'] or window['opera']\r\n      # Checks for iOs, Android, Blackberry, Opera Mini, and Windows mobile devices\r\n      /iPhone|iPod|iPad|Silk|Android|BlackBerry|Opera Mini|IEMobile/.test ua\r\n\r\n    # add 'ie' classes to html\r\n    isIE = ! !navigator.userAgent.match(/MSIE/i)\r\n\r\n\r\n    isIE and angular.element($window.document.body).addClass('ie')\r\n    isSmartDevice($window) and angular.element($window.document.body).addClass('smart')\r\n    # config\r\n    $scope.app =\r\n      name: 'CMS'\r\n      version: '0.1.0'\r\n      color:\r\n        primary: '#7266ba'\r\n        info: '#23b7e5'\r\n        success: '#27c24c'\r\n        warning: '#fad733'\r\n        danger: '#f05050'\r\n        light: '#e8eff0'\r\n        dark: '#3a3f51'\r\n        black: '#1c2b36'\r\n      settings:\r\n        themeID: 1\r\n        navbarHeaderColor: 'bg-black'\r\n        navbarCollapseColor: 'bg-white-only'\r\n        asideColor: 'bg-black'\r\n        headerFixed: true\r\n        asideFixed: false\r\n        asideFolded: false\r\n        asideDock: false\r\n        container: false\r\n    # save settings to local storage\r\n    if angular.isDefined($localStorage.settings)\r\n      $scope.app.settings = $localStorage.settings\r\n    else\r\n      $localStorage.settings = $scope.app.settings\r\n\r\n    $scope.$watch 'app.settings', (->\r\n      if $scope.app.settings.asideDock and $scope.app.settings.asideFixed\r\n        # aside dock and fixed must set the header fixed.\r\n        $scope.app.settings.headerFixed = true\r\n      # save to local storage\r\n      $localStorage.settings = $scope.app.settings\r\n      return\r\n    ), true\r\n\r\n    # angular translate\r\n    $scope.lang = isopen: false\r\n    $scope.langs =\r\n      en: 'English'\r\n      ru: 'Rusian'\r\n    $scope.selectLang = $scope.langs[$translate.proposedLanguage()] or 'English'\r\n\r\n    $scope.setLang = (langKey, $event) ->\r\n      # set the current lang\r\n      $scope.selectLang = $scope.langs[langKey]\r\n      # You can change the language during runtime\r\n      $translate.use langKey\r\n      $scope.lang.isopen = !$scope.lang.isopen\r\n      return\r\n]\r\n\r\napp.controller 'RootFormCtrl', [\r\n  '$scope',\r\n  ($scope) ->\r\n    $scope.contentFields = []\r\n    $scope.addContentField = () ->\r\n      console.log 'asd'\r\n      $scope.contentFields.push\r\n        name: ''\r\n        type: 'string'\r\n\r\n    $scope.removeContentField = (index) ->\r\n      $scope.contentFields.splice(index, 1)\r\n]\r\n\r\napp.controller 'PostsIndexCtrl', [\r\n  '$scope', '$http',\r\n  ($scope,   $http) ->\r\n    $scope.moderationUrl = ''\r\n    $scope.batch = []\r\n    $scope.approval = {}\r\n    $scope.approve = (id) ->\r\n      status = if ($scope.approval['post_'+id]) then '1' else '2'\r\n      $http.put($scope.moderationUrl+'/'+id+'?fastModeration=1', {'status': status })\r\n\r\n    $scope.batchAction = () ->\r\n      console.log($scope.batch)\r\n]\r\n###\r\napp.service 'Toaster', [\r\n  '$scope', 'toaster', ($scope, toaster) ->\r\n\t$scope.toaster = {\r\n\t\ttype: 'success',\r\n\t\ttitle: 'Title',\r\n\t\ttext: 'Message'\r\n\t}\r\n\t$scope.pop = () ->\r\n\t\ttoaster.pop($scope.toaster.type, $scope.toaster.title, $scope.toaster.text)\r\n]\r\n###\r\napp.controller 'MenuTreeCtrl', [\r\n  '$scope', '$http', ($scope, $http) ->\r\n    $scope.url = ''\r\n    $scope.storeUrl = ''\r\n    $scope.item = {}\r\n    $scope.additions = {}\r\n    $scope.output = []\r\n    $scope.providers = {}\r\n\r\n    $scope.loadProvider = (provider, url) ->\r\n      $http.get(url).success (data) -> $scope.providers[provider] = data;\r\n\r\n    $('[ui-jq=nestable]').on 'change', (event) ->\r\n      list = $(event.target)\r\n      $scope.output = list.nestable('serialize');\r\n      $scope.$apply()\r\n\r\n    $scope.$watch 'output', (val) ->\r\n      if val.length\r\n        $http.put($scope.url, {tree: val}).success (data) -> console.log(data)\r\n\r\n    $scope.addItem = (form) ->\r\n      data = angular.extend($scope.item, $scope.additions[form])\r\n      $http.post(\r\n        $scope.storeUrl, data\r\n      ).success (data) ->\r\n        req =\r\n          method: 'GET',\r\n          url: window.location.href,\r\n          headers: {\r\n            'Accept': 'text/html',\r\n            'X-Requested-With': 'XMLHttpRequest',\r\n          },\r\n        $http(req).success (data) ->\r\n          $scope.item = {}\r\n          $('[ui-jq=nestable]').html data\r\n\r\n]\r\n"]}